<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0-internal) on Tue Mar 26 11:02:31 EDT 2013 -->
<title>Sweeper (PhantomFinal API)</title>
<meta name="date" content="2013-03-26">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="Sweeper (PhantomFinal API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li>Next Class</li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/smokejumperit/phantomFinal/Sweeper.html" target="_top">Frames</a></li>
<li><a href="Sweeper.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.smokejumperit.phantomFinal</div>
<h2 title="Class Sweeper" class="title">Class Sweeper</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>com.smokejumperit.phantomFinal.Sweeper</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="strong">Sweeper</span>
extends java.lang.Object</pre>
<div class="block">This class is responsible for monitoring and performing clean-up on garbage collected objects.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../com/smokejumperit/phantomFinal/Sweeper.html#Sweeper()">Sweeper</a></strong>()</code>
<div class="block">Constructs a default instance that uses daemon threads at maximum priority for the polling and cleanup 
 tasks.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><strong><a href="../../../com/smokejumperit/phantomFinal/Sweeper.html#Sweeper(java.util.concurrent.Executor)">Sweeper</a></strong>(java.util.concurrent.Executor&nbsp;executor)</code>
<div class="block">Constructs an instance that uses the given <code>Executor</code> to execute polling and cleanup tasks,
 including a background sweeping thread.</div>
</td>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../com/smokejumperit/phantomFinal/Sweeper.html#Sweeper(java.util.concurrent.Executor, boolean)">Sweeper</a></strong>(java.util.concurrent.Executor&nbsp;executor,
       boolean&nbsp;backgroundSweeping)</code>
<div class="block">Constructs an instance that uses the given <code>Executor</code> to execute polling and cleanup tasks.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><strong><a href="../../../com/smokejumperit/phantomFinal/Sweeper.html#Sweeper(java.util.concurrent.ThreadFactory)">Sweeper</a></strong>(java.util.concurrent.ThreadFactory&nbsp;forExecutor)</code>
<div class="block">Constructs an instance that uses the given ThreadFactory to create threads for polling and cleanup tasks.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/smokejumperit/phantomFinal/Sweeper.html#onGC(java.lang.Object, java.lang.Runnable)">onGC</a></strong>(java.lang.Object&nbsp;key,
    java.lang.Runnable&nbsp;behavior)</code>
<div class="block">Register an action to be performed after the key is garbage collected.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/smokejumperit/phantomFinal/Sweeper.html#queueingSweep()">queueingSweep</a></strong>()</code>
<div class="block">Performs a sweep in the current thread, but cleanup work is done via the <code>Executor</code>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/smokejumperit/phantomFinal/Sweeper.html#registerShutdownHook()">registerShutdownHook</a></strong>()</code>
<div class="block">Registers a shutdown hook to execute the clean-up on anything that didn't get GC'ed.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.util.List&lt;java.lang.Runnable&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../com/smokejumperit/phantomFinal/Sweeper.html#shutdown()">shutdown</a></strong>()</code>
<div class="block">Prevents the Sweeper from processing new objects, and returns a 
 collection of <code>Runnable</code> objects that have not been cleaned up.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/smokejumperit/phantomFinal/Sweeper.html#sweep()">sweep</a></strong>()</code>
<div class="block">Performs a sweep and cleanup in the current thread.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="Sweeper()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>Sweeper</h4>
<pre>public&nbsp;Sweeper()</pre>
<div class="block">Constructs a default instance that uses daemon threads at maximum priority for the polling and cleanup 
 tasks.</div>
</li>
</ul>
<a name="Sweeper(java.util.concurrent.ThreadFactory)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>Sweeper</h4>
<pre>public&nbsp;Sweeper(java.util.concurrent.ThreadFactory&nbsp;forExecutor)</pre>
<div class="block">Constructs an instance that uses the given ThreadFactory to create threads for polling and cleanup tasks.
 The ThreadFactory is used to construct an <code>ExecutorService</code>. Currently, this is a <code>ThreadPoolExecutor</code>,
 but that may change in a later implementation.</div>
</li>
</ul>
<a name="Sweeper(java.util.concurrent.Executor)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>Sweeper</h4>
<pre>public&nbsp;Sweeper(java.util.concurrent.Executor&nbsp;executor)</pre>
<div class="block">Constructs an instance that uses the given <code>Executor</code> to execute polling and cleanup tasks,
 including a background sweeping thread.
 Note that the executor is assumed to be able to execute blocking tasks. If (for instance)
 the executor executes all the tasks directly, the calling thread will hang.</div>
</li>
</ul>
<a name="Sweeper(java.util.concurrent.Executor, boolean)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>Sweeper</h4>
<pre>public&nbsp;Sweeper(java.util.concurrent.Executor&nbsp;executor,
       boolean&nbsp;backgroundSweeping)</pre>
<div class="block">Constructs an instance that uses the given <code>Executor</code> to execute polling and cleanup tasks.
 If the second argument is <code>false</code>, the background sweeping thread will not be launched, and 
 the user will need to use <a href="../../../com/smokejumperit/phantomFinal/Sweeper.html#sweep()"><code>sweep()</code></a> or <a href="../../../com/smokejumperit/phantomFinal/Sweeper.html#queueingSweep()"><code>queueingSweep()</code></a> to manually trigger polling
 of the queue.</div>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="registerShutdownHook()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>registerShutdownHook</h4>
<pre>public&nbsp;void&nbsp;registerShutdownHook()</pre>
<div class="block">Registers a shutdown hook to execute the clean-up on anything that didn't get GC'ed.
 Note that cleanup will be executed for any keys that are still alive. See also caveats
 from <code>Runtime.addShutdownHook(Thread)</code>.</div>
</li>
</ul>
<a name="onGC(java.lang.Object, java.lang.Runnable)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onGC</h4>
<pre>public&nbsp;void&nbsp;onGC(java.lang.Object&nbsp;key,
        java.lang.Runnable&nbsp;behavior)</pre>
<div class="block">Register an action to be performed after the key is garbage collected.</div>
</li>
</ul>
<a name="shutdown()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shutdown</h4>
<pre>public&nbsp;java.util.List&lt;java.lang.Runnable&gt;&nbsp;shutdown()</pre>
<div class="block">Prevents the Sweeper from processing new objects, and returns a 
 collection of <code>Runnable</code> objects that have not been cleaned up. Note: 
 the keys may not have been grabage collected for the returned Runnables.</div>
</li>
</ul>
<a name="sweep()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sweep</h4>
<pre>public&nbsp;boolean&nbsp;sweep()</pre>
<div class="block">Performs a sweep and cleanup in the current thread.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>Whether work was found during this poll.</dd></dl>
</li>
</ul>
<a name="queueingSweep()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>queueingSweep</h4>
<pre>public&nbsp;boolean&nbsp;queueingSweep()</pre>
<div class="block">Performs a sweep in the current thread, but cleanup work is done via the <code>Executor</code>.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>Whether work was found during this poll.</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li>Next Class</li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/smokejumperit/phantomFinal/Sweeper.html" target="_top">Frames</a></li>
<li><a href="Sweeper.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
